(function(e){window.Customizations=Backbone.Model.extend({initialize:function(){this.on("change",function(){e("#customizations").val(JSON.stringify(this.attributes))},this)}});window.CustomizeView=Backbone.View.extend({el:"#customize-container",events:{change:"change"},initialize:function(){var t=this,n={};e(".customize-section-title").bind("click",function(){var t=e(this).parent();if(!t.hasClass("open")){e(".customize-section").removeClass("open");t.addClass("open")}else e(".customize-section").removeClass("open")});e(".collapse-sidebar").bind("click",function(){var t=e(".wp-full-overlay");if(t.hasClass("expanded"))t.removeClass("expanded").addClass("collapsed");else t.removeClass("collapsed").addClass("expanded")});e(".color-picker-hex").each(function(){e(this).wpColorPicker({change:function(e){t.change(e)},defaultColor:e(this).attr("data-default")})})},validate:function(t,n){for(var r in t){if(r=="background-image")t[r]="url("+t[r]+")";if(r=="border-width"){t["border-style"]="solid";e(".easingsliderlite-shadow").css({"margin-left":t[r]+"px"})}if(r=="height"&&n==".easingsliderlite-arrows")t["margin-top"]="-"+Math.floor(t[r]/2)+"px";if(r=="shadow-enable"){t["display"]=t[r]=="true"?"block":"none";if(e("img",n).length==0)e(n).append('<img src="'+e('input[data-property="shadow-image"]').val()+'" alt="" />');delete t[r]}if(r=="shadow-image"){e(n).html('<img src="'+t[r]+'" alt="" />');delete t[r]}if(r=="width"||r=="height"||r=="border-width"||r=="border-radius")t[r]=t[r]+"px"}return t},change:function(t){var n=t.target.name.split("["),r=n[0],i=n[1].replace("]",""),s=this.model.get(r),o={},u={};s[i]=t.target.value;o[r]=s;this.model.set(o).trigger("change");u[t.target.dataset.property]=t.target.value;e(t.target.dataset.selector).css(this.validate(u,t.target.dataset.selector))},render:function(){this.$el.find(".wp-full-overlay").animate({opacity:1},{duration:200})}});e(document).ready(function(){window.customizeView=(new CustomizeView({model:new Customizations(JSON.parse(e("#customizations").val()))})).render()})})(jQuery)